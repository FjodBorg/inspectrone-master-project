Ply_ballast_tank.ply works alright but ballast_tank.ply is bad

Ransac vs Teaser

Knn gpu vs cpu

try out faiss'
FCGF
teaser
Ransac



TODO 
Work on kinect to start with
Pose og faiss
read before working on faiss
Use kinetc groundtruth for pose esitmation

IF doable:
rviz instead of open3d visulization
Continuer pose esitmation (2Hz?) for mynteye and kinect
32 Features in pytorch model


# 23 march
add resume dir in config.py (add translation)

look into retraining!
    add rotation around pitch and/or roll together with yaw (line ~87 in data_loader.py)
    Remove scale (we don't scale things here) (line 195)
    translation is not important
    use ransac and icp to make perfect registration
shape recognizion (segmentation?)


check fitness (research fast methods)
    Box filtering (around the translated pointcloud) to check if pointcloud fitness is good
    using 'center' points only check feature points (implment this first)
    ransac?
    plane fitting? (plane orientation fitting)
    corner fitting? 
    particle filter?
    correspondences?
        Check corner correspondences neighbors to see if fit correctly?
        bag of words (word is histogram of features) approach?
        together with KNN use bag of words? (detecting area/obj) 

        look into papers on bag of words on pointclouds
    
1. fitting (on the point cloud itself)
2. bag of words (fixing point clouds)
3. particle filter (esitmation input into new esitmation)


write a ~1-2 page description of each method 


training:
    use ballast_tank as first pcl
    apply augumentation for ballast and scan in rotations
    only consider the paris if it has 80% fitness


march 30:

Find a tool to convert bags to 3dmatch format?
try retraining using new format
ask rune for retraining once it is tested

Store pcd.npy
store color.npy

Overlap ratio needs to be calculated
and text file with all npz files in and combination 
    [pcd1, pcd2, overlap ratio]

###
write about quaternion averageing
bad imu (missing data), estimate something close to it using previous transform
Ask about imu frame, it doesn't seem to be right
where is imu frame, what is the relation to imu frame. What is the "groundtruth" pose?


# 6 april
ideas
    1. Cut tank into pieces for dataset
    2. match between scans
    3. match with whole tank
    
    (crop box function open3d) open3d.geometry.crop_point_cloud

    once dataset works, give to rune
    once dataset works with kinect try out mynteye
    upload dataset to nas (find guide on teams)

Final Loss: 0.238, RTE: 0.715, RRE: 0.188, Hit Ratio: 0.099, Feat Match Ratio: 0.780
Final Loss: 0.233, RTE: 1.259, RRE: 0.356, Hit Ratio: 0.204, Feat Match Ratio: 1.000
Final Loss: 0.170, RTE: 0.987, RRE: 0.289, Hit Ratio: 0.238, Feat Match Ratio: 1.000
Final Loss: 0.139, RTE: 0.623, RRE: 0.153, Hit Ratio: 0.253, Feat Match Ratio: 1.000
Final Loss: 0.185, RTE: 0.905, RRE: 0.247, Hit Ratio: 0.236, Feat Match Ratio: 1.000
Final Loss: 0.244, RTE: 1.325, RRE: 0.380, Hit Ratio: 0.222, Feat Match Ratio: 1.000

# 13 april 
    epocs vs loss / hit ratio
    before after training performance (on test set)
    transfer learning
    writing report and to testings (video)
    correspondences

    hit ratio = if transform point == target point within dist hit_thr 

do option for cropping ply's 
    remove random cloud parts
    find way to crop smartly
    cross matching for ballast tank parts too? 


make option to delete every file in folder
cross_scan matching is baaad since it tries to find features to match with the scans and not container

How is the drone set up ?

plane estimating for cropping?
add noise to scans 

Cropping has minimum size of length+width+height of 6 to 
ensure a region is large enough. Other than that the cloud size>=10000
is checked to ensure that it is picking a region that actually has 
points in it